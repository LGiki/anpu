---
import Layout from "@/layouts/Layout.astro";

import { getCollection } from "astro:content";
import { slugify } from "@/utils";
import Badge from "@/components/Badge.astro";
import { defaultLang } from "@/i18n/ui";
const songs = await getCollection("song", (song) => {
  const [lyricLanguage] = song.slug.split("/");
  return lyricLanguage === defaultLang;
});
---

<Layout title="Lyric">
  <div class="flex flex-col gap-2 max-w-3xl mx-auto px-6 py-8">
    {
      songs.map((song) => {
        const [_, ...slug] = song.slug.split("/");
        return (
          <a
            href={`/song/${slugify(slug.join())}`}
            class="flex items-center gap-1"
          >
            {song.data.title}
            {song.data.hasBanlamTone && <Badge>Âè∞</Badge>}
          </a>
        );
      })
    }
  </div>
</Layout>
