---
import { defaultLang } from "@/i18n/ui";
import Layout from "@/layouts/Layout.astro";
import { getCollection, render } from "astro:content";
import "@/assets/markdown.css";
import AboutContainer from "@/components/AboutContainer.astro";

export async function getStaticPaths() {
  const abouts = await getCollection("about", (about) => {
    const [aboutLanguage] = about.id.split("/");
    return aboutLanguage !== defaultLang;
  });

  if (abouts.length > 0) {
    const about = abouts[0];
    const [aboutLanguage] = about.id.replace(/(\.md)+$/, "").split("/");
    return [
      {
        params: {
          lang: aboutLanguage,
        },
        props: { about },
      },
    ];
  } else {
    return [];
  }
}

const { about } = Astro.props;
const aboutRenderResult = await render(about);
---

<Layout title="About" hideDefaultTitle={true}>
  <AboutContainer renderResult={aboutRenderResult} />
</Layout>
