---
import ConcertPerfromedSongStatisticsList from "@/components/ConcertPerfromedSongStatisticsList.astro";
import { defaultLang, languages } from "@/i18n/ui";
import Layout from "@/layouts/Layout.astro";
import { getCollection } from "astro:content";

const concerts = await getCollection("concert", (concert) => {
  const [concertLanguage] = concert.id.split("/");
  return concertLanguage !== defaultLang;
});

export async function getStaticPaths() {
  return Object.entries(languages)
    .filter(([locale]) => locale !== defaultLang)
    .map(([locale]) => {
      return {
        params: {
          lang: locale,
        },
      };
    });
}
---

<Layout title="Statistics">
  <ConcertPerfromedSongStatisticsList concerts={concerts} />
</Layout>
