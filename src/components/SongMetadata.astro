---
import { getLangFromUrl, useTranslations } from "@/i18n/utils";
import { durationToHms } from "@/utils";
import dayjs from "dayjs";
import MetadataStringsItem from "./MetadataStringsItem.astro";
import MetadataContentBlock from "./MetadataContentBlock.astro";
import MetadataNotes from "./MetadataNotes.astro";

interface Props {
  // 英文标题
  englishTitle?: string;
  // 专辑
  album?: string;
  // 长度（秒）
  duration?: number;
  // 歌手
  artist?: string[] | string;
  // 作词者
  lyricist?: string[] | string;
  // 编曲者
  arranger?: string[] | string;
  // 作曲者
  composer?: string[] | string;
  // 制作人
  producer?: string[] | string;
  // 发布日期
  releaseDate?: Date;
  // ISRC, see <https://en.wikipedia.org/wiki/International_Standard_Recording_Code>.
  isrc?: string;
  // 混音工程师
  mixingEngineer?: string[] | string;
  // 电吉他
  electricGuitar?: string[] | string;
  // 贝斯
  bass?: string[] | string;
  // 鼓
  drums?: string[] | string;
  // 键盘
  keyboard?: string[] | string;
  // 吉他
  guitar?: string[] | string;
  // 木吉他
  acousticGuitar?: string[] | string;
  // 钢琴
  piano?: string[] | string;
  // 电子钢琴
  digitalPiano?: string[] | string;
  // 钢琴录制
  pianoRecording?: string[] | string;
  // 录音工程师
  recordingEngineer?: string[] | string;
  // 母带工程师
  masteringEngineer?: string[] | string;
  // 录音室
  recordingStudio?: string[] | string;
  // 备注
  notes?: string[] | string;
}

const props = Astro.props;

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<MetadataContentBlock>
  {
    props.englishTitle && (
      <p class="break-all">
        {t("songMetadata.englishTitle")}：{props.englishTitle}
      </p>
    )
  }
  {
    props.duration && (
      <p class="break-all">
        {t("songMetadata.duration")}：{durationToHms(props.duration)}
      </p>
    )
  }
  {
    props.album && (
      <p class="break-all">
        {t("songMetadata.album")}：{props.album}
      </p>
    )
  }
  {
    props.releaseDate && (
      <p class="break-all">
        {t("songMetadata.releaseDate")}：
        {dayjs(props.releaseDate).format("YYYY-MM-DD")}
      </p>
    )
  }
  {
    props.artist && (
      <p class="break-all">
        {t("songMetadata.artist")}：<MetadataStringsItem value={props.artist} />
      </p>
    )
  }
  {
    props.lyricist && (
      <p class="break-all">
        {t("songMetadata.lyricist")}：
        <MetadataStringsItem value={props.lyricist} />
      </p>
    )
  }
  {
    props.arranger && (
      <p class="break-all">
        {t("songMetadata.arranger")}：
        <MetadataStringsItem value={props.arranger} />
      </p>
    )
  }
  {
    props.composer && (
      <p class="break-all">
        {t("songMetadata.composer")}：
        <MetadataStringsItem value={props.composer} />
      </p>
    )
  }
  {
    props.producer && (
      <p class="break-all">
        {t("songMetadata.producer")}：
        <MetadataStringsItem value={props.producer} />
      </p>
    )
  }
  {
    props.guitar && (
      <p class="break-all">
        {t("songMetadata.guitar")}：<MetadataStringsItem value={props.guitar} />
      </p>
    )
  }
  {
    props.acousticGuitar && (
      <p class="break-all">
        {t("songMetadata.acousticGuitar")}：
        <MetadataStringsItem value={props.acousticGuitar} />
      </p>
    )
  }
  {
    props.electricGuitar && (
      <p class="break-all">
        {t("songMetadata.electricGuitar")}：
        <MetadataStringsItem value={props.electricGuitar} />
      </p>
    )
  }
  {
    props.bass && (
      <p class="break-all">
        {t("songMetadata.bass")}：<MetadataStringsItem value={props.bass} />
      </p>
    )
  }
  {
    props.drums && (
      <p class="break-all">
        {t("songMetadata.drums")}：<MetadataStringsItem value={props.drums} />
      </p>
    )
  }
  {
    props.piano && (
      <p class="break-all">
        {t("songMetadata.piano")}：<MetadataStringsItem value={props.piano} />
      </p>
    )
  }
  {
    props.digitalPiano && (
      <p class="break-all">
        {t("songMetadata.digitalPiano")}：
        <MetadataStringsItem value={props.digitalPiano} />
      </p>
    )
  }
  {
    props.keyboard && (
      <p class="break-all">
        {t("songMetadata.keyboard")}：
        <MetadataStringsItem value={props.keyboard} />
      </p>
    )
  }
  {
    props.recordingEngineer && (
      <p class="break-all">
        {t("songMetadata.recordingEngineer")}：
        <MetadataStringsItem value={props.recordingEngineer} />
      </p>
    )
  }
  {
    props.masteringEngineer && (
      <p class="break-all">
        {t("songMetadata.masteringEngineer")}：
        <MetadataStringsItem value={props.masteringEngineer} />
      </p>
    )
  }
  {
    props.mixingEngineer && (
      <p class="break-all">
        {t("songMetadata.mixingEngineer")}：
        <MetadataStringsItem value={props.mixingEngineer} />
      </p>
    )
  }
  {
    props.pianoRecording && (
      <p class="break-all">
        {t("songMetadata.pianoRecording")}：
        <MetadataStringsItem value={props.pianoRecording} />
      </p>
    )
  }
  {
    props.recordingStudio && (
      <p class="break-all">
        {t("songMetadata.recordingStudio")}：
        <MetadataStringsItem value={props.recordingStudio} />
      </p>
    )
  }
  {props.isrc && <p class="break-all">ISRC：{props.isrc}</p>}
  {props.notes && <MetadataNotes notes={props.notes} />}
</MetadataContentBlock>
